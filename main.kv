#:import SwapTransition kivy.uix.screenmanager.SwapTransition
#:import SlideTransition kivy.uix.screenmanager.SlideTransition
MDScreen:
    name: "main"

    MDBottomNavigation:
        text_color_active: 0, 0, 0, 1
        #panel_color: "#eeeaea"
        selected_color_background: "orange"

        MDBottomNavigationItem:
            id: nav
            name: 'screen 1'
            text: 'Home'
            icon: 'home'
            MDBoxLayout:
                orientation: "vertical"
                MDTabs:
                    id: tabs
                    Tab:
                        title: "Tarefas disponíveis"
                        icon: "format-list-numbered"
                        MDScrollView:
                            MDBoxLayout:
                                id: tasks
                                padding: 10
                                spacing: 10
                                size_hint_y: None
                                orientation: "vertical"
                                height: self.minimum_height
                                on_minimum_height: self.height = self.minimum_height
                    
                        MDBoxLayout:
                            id: box
                            spacing: "56dp"
                            adaptive_size: True
                            pos_hint: {"center_x": .83, "center_y": .10}
                            MDIconButton:
                                icon: "plus-circle"
                                icon_size: "40sp"
                                on_press:
                                    root.manager.transition = SwapTransition()
                                    root.manager.current = "tasks_send"
                                    app.screen_manager.transition = SlideTransition()
                    Tab:
                        title: "Iniciadas"
                        icon:"clock-check"
                        MDScrollView:
                            MDBoxLayout:
                                id: tasks_ongoing
                                padding: 10
                                spacing: 10
                                size_hint_y: None
                                orientation: "vertical"
                                height: self.minimum_height
                                on_minimum_height: self.height = self.minimum_height
                    Tab:
                        title: "Finalizadas"
                        icon: "check-all"
                        MDScrollView:
                            MDBoxLayout:
                                id: tasks_finished
                                padding: 10
                                spacing: 10
                                size_hint_y: None
                                orientation: "vertical"
                                height: self.minimum_height
                                on_minimum_height: self.height = self.minimum_height

                

        MDBottomNavigationItem:
            name: 'screen 2'
            text: 'Busca'
            icon: 'book-search'

            ScreenListItems
        MDBottomNavigationItem:
            name: 'screen 3'
            text: 'Preços'
            icon: 'printer-check'
            MDBoxLayout:
                orientation: "vertical"
                MDTopAppBar:
                    elevation: 2
                    title: "ITENS A PRECIFICAR"
                MDScrollView:
                    scroll_timeout : 100
                
                    MDList:
                        id: md_list
                        padding: 0
                MDBoxLayout:
                    orientation: "vertical"
                    size_hint_y: None
                    height: "0dp"
                    padding: "12dp"
                    pos_hint: {"center_x": 1.25, "center_y": .10}
                    MDIconButton:
                        icon: "plus-circle"
                        icon_size: "40sp"
                        on_press:
                            root.manager.transition = SwapTransition()
                            root.manager.current = "prices_add"
                            app.screen_manager.transition = SlideTransition()
                        

        MDBottomNavigationItem:
            name: 'screen 4'
            text: 'Perfil'
            icon: "account-box"
            MDBoxLayout:
                orientation: "vertical"
                MDTabs:
                    id: tabs
                    Tab:
                        title: "Meus dados"
                        icon: "account-box"
                        FloatLayout:
                
                            CampoDados:
                                font_size: "18sp"
                                mode: "rectangle"
                                text: "teste"
                                id: name
                                hint_text: "nome completo"
                                icon_right: "account"
                                pos_hint: {'center_x': 0.5, 'center_y': 0.85}
                            CampoDados:
                                font_size: "18sp"
                                mode: "rectangle"
                                id: birth
                                hint_text: "nascimento dd/mm/yy"
                                icon_right: "calendar"
                                pos_hint: {'center_x': 0.5, 'center_y': 0.70}
                            CampoDados:
                                font_size: "18sp"
                                mode: "rectangle"
                                id: pnum
                                hint_text: "celular"
                                icon_right: "cellphone"
                                pos_hint: {'center_x': 0.5, 'center_y': 0.55}
                            CampoDados:
                                font_size: "18sp"
                                mode: "rectangle"
                                id: mail
                                hint_text: "e-mail"
                                icon_right: "mail"
                                pos_hint: {'center_x': 0.5, 'center_y': 0.40}                 
                            CampoDados:
                                font_size: "18sp"
                                mode: "rectangle"
                                id: username
                                hint_text: "nome de usuário"
                                icon_right: "account"
                                pos_hint: {'center_x': 0.5, 'center_y': 0.25}
                            MDRectangleFlatIconButton:
                                font_size: "30sp"
                                line_color: 0, 0, 0, 0
                                text: "DESLOGAR"
                                icon: "logout"
                                line_color: 0, 0, 0, 0
                                pos_hint: {"center_x": .5, "center_y": .12}
                                on_press: 
                                    app.show_alert_dialog()
                    Tab:
                        title: "Configurações"
                        icon: "account-settings"
                        MDFloatLayout:
                            MDSwitch:
                                pos_hint: {'center_x': .5, 'center_y': .5}
                                icon_active: "check"
                                icon_active_color: "white"
            


<ScreenListItems>:
    name: "list_items"
    FloatLayout:
        
        CampoPesquisa:
            id: pesquisa 
            hint_text: 'Digite o que procura'
            text_validade_unfocus: False
            pos_hint: {'center_x': 0.5, 'center_y': 0.9}
            size_hint: .8, .11
            on_text: root.lista_a_procura(self.text, True)

        RecycleView:
            id: rv
            viewclass: 'ListaItemsComImg'
            key_size: 'height'
            pos_hint: {'top': 0.8}
            RecycleBoxLayout:
                padding: dp(10)
                default_size: None, dp(70)
                default_size_hint: 1, None
                size_hint_y: None
                height: self.minimum_height
                orientation: 'vertical'

<ListaItemsComImg>:
    text: "DUAS LINHAS COM AVATAR"
    secondary_text: "SEGUNDA LINHA AQUI"

<CampoPesquisa@MDTextField>:
    mode: "fill"
    font_size: '20sp'
    normal_color: app.theme_cls.primary_dark
    color_active: app.theme_cls.primary_dark
    halign: 'center'
    multiline: False
    icon: "clock-alert"

<Content>
    orientation: "vertical"
    spacing: "12dp"
    size_hint_y: None
    height: "120dp"

    MDTextField:
        hint_text: "Título"

    MDTextField:
        hint_text: "Descrição"

<CampoDados@MDTextField>:
    size_hint_x: "0.8"
    font_size: "18sp"

<MD3Card>
    line_color: 0.1, 0.9, 0.9, 0.8
    height: "180dp"
    padding: "10dp", "10dp"
    size_hint: 1, None
    style: "outlined" 
    radius: [10,10,10,10]

<SwipeToDeleteItem>
    on_swipe_complete: app.on_swipe_complete(root)
    size_hint_y: None
    height: content.height

    MDCardSwipeFrontBox:
        # Content of card.
        OneLineListItem:
            id: content
            text: root.text
            _no_ripple_effect: True