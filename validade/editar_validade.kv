#:import edit_selected_row validade.edit_selected_row
#:import partial functools.partial

FValidade:
    name: "editar_validade"
    FloatLayout:
        id: campos_fazer_validade
        MDIconButton:
            icon: "arrow-collapse-left"
            pos_hint: {"center_y": .95}
            user_font_size: "30sp"
            on_press:
                root.manager.transition.direction = "right"
                root.manager.current = "tela_validade"
        MDLabel:
            id: index
            text: "text"
            opacity: 0.0
        MDLabel:
            id: responsible
            text: "text"
            opacity: 0.0
        MDLabel:
            id: date_time
            text: "text"
            opacity: 0.0
        CampoDados:
            id: ean_ou_in
            hint_text: "COD EAN ou IN"
            size_hint_x: "0.9"
            icon_right: 'format-list-numbered'
            font_size: "18sp"
            pos_hint: {'center_x': 0.5, 'center_y': 0.85}
        CampoDados:
            id: val_desc
            size_hint_x: "0.9"
            hint_text: "Descrição"
            icon_right: "list-status"
            font_size: "18sp"
            pos_hint: {'center_x': 0.5, 'center_y': 0.75}
        CampoDados:
            id: val_curva
            hint_text: "Curva"
            icon_right: 'sale'
            size_hint_x: "0.9"
            font_size: "18sp"
            pos_hint: {'center_x': 0.5, 'center_y': 0.65}
        CampoDados:
            id: val_qtd
            hint_text: "Quantidade"
            icon_right: 'counter'
            size_hint_x: "0.9"
            font_size: "18sp"
            pos_hint: {'center_x': 0.5, 'center_y': 0.55}
        CampoDados:
            id: data_vencimento
            hint_text: "Vencimento dd/mm/aaaa"
            validator: "date"
            icon_right: "calendar"
            date_format: "dd/mm/yyyy"
            size_hint_x: "0.9"
            font_size: "18sp"
            pos_hint: {'center_x': 0.5, 'center_y': 0.45}                  
        MDRectangleFlatIconButton:
            id: botao_enviar_validade
            fonte_name: "Kumbh"
            font_size: "25sp"
            line_color: 0, 0, 0, 0
            text: "EDITAR"
            icon: "plus-box-multiple-outline"
            line_color: 0, 0, 0, 0
            pos_hint: {"center_x": .5, "center_y": .15}
            on_press:
                edit_selected_row(ean_ou_in.text, val_desc.text, val_curva.text, val_qtd.text, data_vencimento.text, app.setor, root.access_key_data())
                root.manager.get_screen("tela_validade").update_row_on_table(index.text,ean_ou_in.text, val_desc.text, val_curva.text, val_qtd.text, data_vencimento.text, responsible.text, date_time.text)
                ean_ou_in.text = ""
                val_desc.text = ""
                val_curva.text = ""
                val_qtd.text = ""
                data_vencimento.text = ""
        Widget:
            size_hint_y: None
            height: 10